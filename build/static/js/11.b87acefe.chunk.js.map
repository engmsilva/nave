{"version":3,"sources":["ContextAPI/useCustomHooks.js","pages/Navers/Modal.js","pages/Navers/index.js"],"names":["useCustomHooks","React","useContext","ContextAPI","api","axios","create","baseURL","process","header","config","a","Promise","resolve","reject","get","then","response","catch","error","post","put","delete","getIsAuth","interceptors","request","use","token","getToken","headers","Authorization","getAPI","postAPI","putAPI","deleteAPI","ModalDetail","props","state","dispatch","handleDelete","handleEdit","momentToBirthday","date","formatString","moment","utc","format","age","diff","months","days","width","bodyStyle","padding","centered","visible","showModal","onOk","type","payload","nested","value","onCancel","footer","gutter","span","className","alt","src","naverSelect","url","name","job_role","birthdate","admission_date","project","placement","title","DeleteFilled","key","onClick","id","EditFilled","confirm","Navers","useState","loading","setLoading","getFetch","useRef","success","content","data","naver","dataNavers","find","item","postEditTemp","navigate","icon","ExclamationCircleOutlined","okText","cancelText","onDelete","useEffect","current","spinning","size","map","Fragment","hoverable","cover","handleDetail"],"mappings":"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","file":"static/js/11.b87acefe.chunk.js","sourcesContent":["import React from 'react';\nimport { ContextAPI } from './context';\nimport axios from \"axios\";\nimport { getToken, getIsAuth } from \"../pages/Auth/localStorage\";\n\nconst url = process.env.REACT_APP_URL_API\n\nconst useCustomHooks = () => {\n  // eslint-disable-next-line no-unused-vars\n  const [state, dispatch] = React.useContext(ContextAPI);\n\n  const api = axios.create({\n    baseURL: url,\n    header:{\n      'Access-Control-Allow-Origin': '*',\n      'Accept': 'application/json',\n      'Content-Type': 'application/json;charset=UTF-8'\n    }\n  });\n\n  if(getIsAuth()) {\n    api.interceptors.request.use(async config => {\n      const token = getToken()\n      config.headers.Authorization = `Bearer ${token}`;\n      return config;\n    }, error =>\n       Promise.reject(error)\n    );\n  }\n\n  async function getAPI(config) {\n    return new Promise((resolve, reject) => {\n      api.get(...config)\n        .then((response) => {\n          resolve(response);\n        })\n        .catch((error) => {\n          reject(error);\n        });\n    });\n  }\n\n  async function postAPI(config) {\n    return new Promise((resolve, reject) => {\n      api.post(...config)\n        .then((response) => {\n          resolve(response);\n        })\n        .catch((error) => {\n          reject(error);\n        });\n    });\n  }\n\n  async function putAPI(config) {\n    return new Promise((resolve, reject) => {\n      api.put(...config)\n        .then((response) => {\n          resolve(response);\n        })\n        .catch((error) => {\n          reject(error);\n        });\n    });\n  }\n\n\n  async function deleteAPI(config) {\n    return new Promise((resolve, reject) => {\n      api.delete(...config)\n        .then((response) => {\n          resolve(response);\n        })\n        .catch((error) => {\n          reject(error);\n        });\n    });\n  }\n\n  return {\n    getAPI,\n    postAPI,\n    putAPI,\n    deleteAPI\n  }\n};\n\nexport default useCustomHooks;\n","import React from 'react';\nimport { ContextAPI } from '../../ContextAPI/context';\nimport {\n        Modal,\n        Row,\n        Col,\n        Space,\n        Tooltip\n      } from 'antd';\nimport {\n          DeleteFilled,\n          EditFilled\n         } from '@ant-design/icons';\nimport moment from 'moment';\nimport './styles.css';\n\nexport default function ModalDetail(props) {\n  // eslint-disable-next-line no-unused-vars\n  const [state, dispatch] = React.useContext(ContextAPI);\n  const { handleDelete, handleEdit } = props;\n\n  const momentToBirthday = (date) => {\n    const formatString = moment.utc(date).format('YYYY-MM-DD');\n    const age = moment().diff(formatString, 'years');\n    if(age < 1){\n      const months = moment().diff(formatString, 'months');\n      if(months < 1){\n        const days = moment().diff(formatString, 'days');\n        if(days < 1){\n          return 'Meu primeiro dia'\n        }\n        return `${days} dia${days > 1 ? 's' : ''}`\n      }\n      return `${months} ${months > 1 ? 'meses' : 'mês'}`\n    }\n    return `${age} ano${age > 1 ? 's' : ''}`\n  }\n\n  const handleOk = () => {\n    dispatch({ type: \"utils\", payload: { nested: 'showModalProject', value: true } });\n  };\n\n  const  handleCancel = () => {\n    dispatch({ type: \"setState\", payload: {nested: \"showModal\", value: false } });\n  };\n\nreturn (\n    <>\n      <Modal\n        width=\"80%\"\n        bodyStyle={{padding: '0px' }}\n        centered\n        visible={state.showModal}\n        onOk={handleOk}\n        onCancel={handleCancel}\n        footer={null}\n      >\n        <Row gutter={20}>\n          <Col span={12}>\n            <Row className=\"modal-content\">\n              <img\n                className=\"photo-navers\"\n                alt=\"cover\"\n                src={state.naverSelect.url}\n              />\n            </Row>\n          </Col>\n          <Col  span={12}>\n            <div className=\"modal-detail-naver\">\n              <Row>\n                <span className=\"modal-detail-name\">{state.naverSelect.name}</span>\n              </Row>\n              <Row className=\"modal-info-naver\">\n                <span className=\"modal-label\">{state.naverSelect.job_role}</span>\n              </Row>\n              <Row>\n                <span className=\"modal-label\">Idade</span>\n              </Row>\n              <Row className=\"modal-info-naver\">\n                <span className=\"modal-detail\">\n               {momentToBirthday(state.naverSelect.birthdate)}\n                </span>\n              </Row>\n              <Row>\n                <span className=\"modal-label\">Tempo de Empresa</span>\n              </Row>\n              <Row className=\"modal-info-naver\">\n                <span className=\"modal-detail\">\n                {momentToBirthday(state.naverSelect.admission_date)}\n                </span>\n              </Row>\n              <Row>\n                <span className=\"modal-label\">Projetos que participou</span>\n              </Row>\n              <Row className=\"modal-info-naver\">\n                <span className=\"modal-detail\">{state.naverSelect.project}</span>\n              </Row>\n              <Row className=\"modal-actions\">\n              <Space>\n                <Tooltip placement=\"bottomRight\" title=\"Excluir\">\n                  <DeleteFilled key=\"setting\" onClick={() => handleDelete(state.naverSelect.id)} />\n                </Tooltip>\n                <Tooltip placement=\"bottomLeft\" title=\"Editar\">\n                  <EditFilled key=\"edit\" onClick={() => handleEdit(state.naverSelect.id)} />\n                </Tooltip>\n              </Space>\n              </Row>\n            </div>\n          </Col>\n        </Row>\n      </Modal>\n    </>\n  );\n}","import React from 'react';\nimport { ContextAPI } from '../../ContextAPI/context';\nimport useCustomHooks from '../../ContextAPI/useCustomHooks';\nimport { postEditTemp } from '../Auth/localStorage';\nimport {\n        Row,\n        Button,\n        Card,\n        Space,\n        Col,\n        Modal,\n        Tooltip,\n        Spin\n      } from 'antd';\nimport { navigate } from 'hookrouter';\nimport ModalDetail from './Modal';\nimport './styles.css';\n\nimport {\n  EditFilled,\n  DeleteFilled,\n  ExclamationCircleOutlined\n} from '@ant-design/icons';\n\nconst { confirm } = Modal;\n\nexport default function Navers() {\n  // eslint-disable-next-line no-unused-vars\n  const [state, dispatch] = React.useContext(ContextAPI);\n  const [loading, setLoading] = React.useState(false);\n  const { getAPI, deleteAPI } = useCustomHooks();\n  const getFetch = React.useRef(getData);\n\n  const success = () => {\n    Modal.success({\n      title: 'Naver excluído',\n      content: 'Naver excluído com sucesso.',\n    });\n  }\n\n  async function getData() {\n    setLoading(true);\n    await getAPI(['/navers']).then(response => {\n      setLoading(false);\n      dispatch({ type: \"setState\", payload: { nested: \"dataNavers\", value: response.data } });\n    });\n  }\n\n  const handleEdit = (id) => {\n    const naver = state.dataNavers.find(item => item.id === id);\n    postEditTemp(naver);\n    // dispatch({ type: \"setState\", payload: { nested: \"naverSelect\", value: naver } });\n    dispatch({ type: \"setState\", payload: { nested: \"showModal\", value: false } });\n    navigate('/edit');\n  }\n\n  const handleDetail = (id) => {\n    const naver = state.dataNavers.find(item => item.id === id);\n    dispatch({ type: \"setState\", payload: { nested: \"naverSelect\", value: naver } });\n    dispatch({ type: \"setState\", payload: { nested: \"showModal\", value: true } });\n  }\n\n  async function onDelete(id) {\n    await deleteAPI([`/navers/${id}`]).then(response => {\n      dispatch({ type: \"deleteState\", payload: { nested: \"dataNavers\", value: id } });\n      dispatch({ type: \"setState\", payload: { nested: \"showModal\", value: false } });\n      success()\n    });\n  }\n\n  const handleDelete = (id) => {\n    confirm({\n      title: 'Excluir Naver',\n      icon: <ExclamationCircleOutlined />,\n      content: 'Tem certeza que deseja excluir este Naver',\n      okText: \"Confirmar\",\n      cancelText: \"Cancelar\",\n      onOk() {\n        onDelete(id);\n      },\n      onCancel() { },\n    });\n  }\n\n  React.useEffect(() => {\n    getFetch.current();\n  }, [])\n\n  return (\n    <>\n      <Row className=\"control-navers\">\n        <span className=\"title-control-navers\">Navers</span>\n        <Button type=\"primary\" onClick={() => navigate('/register')}>Adicionar Naver</Button>\n      </Row>\n      <Row className={`card-navers ${loading && 'center-spin'}`}>\n      <Spin spinning={loading} size=\"large\" />\n        {!loading && state.dataNavers.map(item => {\n          return (\n            <React.Fragment key={item.id}>\n              <Col className=\"card-navers-list\" span={6}>\n                <Card\n                  hoverable\n                  cover={\n                    <img\n                        className=\"photo-navers\"\n                        alt=\"cover\" src={item.url}\n                        onClick={() => handleDetail(item.id)}\n                    />\n                  }\n                >\n                  <Row>\n                    <Col span={24}>\n                      <span className=\"name-navers\">{item.name}</span>\n                    </Col>\n                    <Col span={24}>\n                      <span>{item.job_role}</span>\n                    </Col>\n                    <Col span={24}>\n                      <Row className=\"actions-navers\">\n                        <Space>\n                          <Tooltip placement=\"bottomRight\" title=\"Excluir\">\n                            <DeleteFilled key=\"setting\" onClick={() => handleDelete(item.id)} />\n                          </Tooltip>\n                          <Tooltip placement=\"bottomLeft\" title=\"Editar\">\n                            <EditFilled key=\"edit\" onClick={() => handleEdit(item.id)} />\n                          </Tooltip>\n                        </Space>\n                      </Row>\n                    </Col>\n                  </Row>\n                </Card>\n              </Col>\n            </React.Fragment>\n          );\n        })}\n      </Row>\n      <ModalDetail handleDelete={handleDelete} handleEdit={handleEdit} />\n    </>\n  );\n}\n"],"sourceRoot":""}